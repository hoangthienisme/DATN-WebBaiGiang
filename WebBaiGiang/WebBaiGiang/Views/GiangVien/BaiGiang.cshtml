@model PhanTrang<WebBaiGiang.Models.BaiGiang>
@{
    Layout = "~/Views/Shared/_LayoutGiangvien.cshtml";
}
<link href="~/css/pagination.css" rel="stylesheet" />
<link href="~/css/baigiang.css" rel="stylesheet" />

<div class="conTent">
    <h3>BaiGiang</h3>
</div>
<div class="search-filter">
    <div class="search-input-wrapper">
        <img src="~/img/loupe.png" class="search-icon" />
        <input type="text" placeholder="Tìm bài giảng..." class="search-input-courses" />
    </div>
    <div class="dropdown">
        <button class="dropdown-button" onclick="toggleDropdown()">
            Mới nhất <span class="arrow-down">▼</span>
        </button>
        <div class="dropdown-content" id="dropdown-menu">
            <a href="#" onclick="filterCourses('newest')">Mới nhất</a>
            <a href="#" onclick="filterCourses('oldest')">Cũ nhất</a>
            <a href="#" onclick="filterCourses('incomplete')">Chưa hoàn thành</a>
            <a href="#" onclick="filterCourses('completed')">Đã hoàn thành</a>
        </div>
    </div>

    <button class="create-baigiang-button" onclick="location.href='@Url.Action("TaoBaiGiang", "GiangVien")'">
        Tạo bài giảng
    </button>
</div>
<div class="container mt-4" style="margin-left: 60px;">

    @foreach (var item in Model)
    {
        <div class="d-flex justify-content-between align-items-center border-bottom py-3">
            <div class="d-flex align-items-center gap-3">
                <div class="rounded-circle bg-success text-white d-flex justify-content-center align-items-center" style="width: 40px; height: 40px;">
                    <i class="bi bi-journal-richtext fs-5"></i>
                </div>
                <span class="fw-semibold">@item.Title</span>
            </div>
            <div class="text-muted small">
                Đã đăng vào @item.CreatedDate.ToString("HH:mm")
            </div>
            <div class="dropdown">
                <a href="#" role="button" data-bs-toggle="dropdown">
                    <i class="bi bi-three-dots-vertical"></i>
                </a>
                <ul class="dropdown-menu">
                    <li><a class="dropdown-item" asp-action="Edit" asp-route-id="@item.Id">Chỉnh sửa</a></li>
                    <li><a class="dropdown-item text-danger" asp-action="Delete" asp-route-id="@item.Id">Xóa</a></li>
                </ul>
            </div>
        </div>
    }
</div>
<!-- PHÂN TRANG -->
<div class="pagination">
    @if (Model.TotalPages > 1)
    {
        <ul class="pagination-list">
            @if (Model.HasPreviousPage)
            {
                <li><a href="@Url.Action("BaiGiang", new { page = Model.PageIndex - 1 })">← Trước</a></li>
            }

            @for (int i = 1; i <= Model.TotalPages; i++)
            {
                if (i == Model.PageIndex)
                {
                    <li class="active">@i</li>
                }
                else
                {
                    <li><a href="@Url.Action("BaiGiang", new { page = i })">@i</a></li>
                }
            }

            @if (Model.HasNextPage)
            {
                <li><a href="@Url.Action("BaiGiang", new { page = Model.PageIndex + 1 })">Sau →</a></li>
            }
        </ul>
    }
</div>
<!-- Script lọc dropdown -->
<script>
    function toggleDropdown() {
        const menu = document.getElementById("dropdown-menu");
        menu.style.display = menu.style.display === "block" ? "none" : "block";
    }

    function filterCourses(option) {
        alert(`Lọc theo: ${option}`);
        document.getElementById("dropdown-menu").style.display = "none";
    }

    document.addEventListener("click", function (e) {
        const dropdown = document.querySelector(".dropdown");
        if (!dropdown.contains(e.target)) {
            document.getElementById("dropdown-menu").style.display = "none";
        }
    });
</script>

