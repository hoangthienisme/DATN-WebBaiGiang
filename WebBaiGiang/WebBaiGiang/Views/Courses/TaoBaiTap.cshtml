@model WebBaiGiang.Models.TaoBaiTapViewModel

@{
    Layout = null;
    ViewData["Title"] = "Tạo bài tập mới";
}

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

<div class="container mt-4">
    <h3>@ViewData["Title"]</h3>

    <form asp-action="TaoBaiTap" method="post" enctype="multipart/form-data">
        <div class="mb-3">
            <label asp-for="Title" class="form-label fw-bold">Tiêu đề *</label>
            <input asp-for="Title" class="form-control" placeholder="Nhập tiêu đề tài liệu" />
            <span asp-validation-for="Title" class="text-danger"></span>
        </div>

        <div class="mb-3">
            <label asp-for="Description" class="form-label fw-bold">Mô tả (không bắt buộc)</label>
            <textarea asp-for="Description" class="form-control" rows="3"></textarea>
        </div>

        <div class="mb-3">
            <label class="form-label fw-bold">Dành cho lớp</label>
            <div class="d-flex gap-3 flex-wrap">
                @if (Model.AvailableClasses != null && Model.AvailableClasses.Any())
                {
                    foreach (var lop in Model.AvailableClasses)
                    {
                        var id = $"lop{lop.Value}";
                        <div class="form-check">
                            <input class="form-check-input"
                                   type="checkbox"
                                   name="ClassIds"
                                   value="@lop.Value"
                                   id="@id"
                            @(Model.ClassIds != null && Model.ClassIds.Contains(int.Parse(lop.Value)) ? "checked" : "") />
                            <label class="form-check-label" for="@id">@lop.Text</label>
                        </div>
                    }
                }
                else
                {
                    <p>Không có lớp học để hiển thị.</p>
                }
            </div>
        </div>

        <div class="mb-3">
            <label asp-for="MaxScore" class="form-label fw-bold">Điểm tối đa</label>
            <input asp-for="MaxScore" class="form-control" placeholder="Nhập số điểm tối đa (VD: 100)" />
            <span asp-validation-for="MaxScore" class="text-danger"></span>
        </div>
        <div class="mb-3">
            <label asp-for="DueDate" class="form-label fw-bold">Hạn nộp</label>
            <input asp-for="DueDate" class="form-control" type="datetime-local" />
            <span asp-validation-for="DueDate" class="text-danger"></span>
        </div>

        <div class="mb-3">
            <label asp-for="Attachment" class="form-label fw-bold">Đính kèm (nếu có)</label>
            <input asp-for="Attachment" type="file" class="form-control" />
            <span asp-validation-for="Attachment" class="text-danger"></span>
        </div>
        <input asp-for="LopIdGoc" type="hidden" />

        <div class="mt-4">
            <button type="submit" class="btn btn-success">Giao bài tập</button>
        </div>
    </form>
</div>

@section Scripts {
    <partial name="_ValidationScriptsPartial" />
}
